###############################################################################
#                                                                             #
# IAR 8051 C/C++ Compiler V7.30B/W32                    20/Aug/2009  09:21:58 #
# Copyright 2004-2007 IAR Systems. All rights reserved.                       #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data                                               #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\zstack\Components\hal\target\CC2430EB\Hal_Senso #
#                          r.c                                                #
#    Command line       =  -f "E:\zstack\Projects\zstack\Samples\p2p_test(coo #
#                          rdinator)\CC2430DB\..\..\..\Tools\CC2430DB\f8wRout #
#                          er.cfg" (-DCPU32MHZ -DFORCE_MAC_NEAR               #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DRTR_NWK -DBLINK_LEDS "-DCONST=const __code"    #
#                          -DGENERIC=__generic) -f "E:\zstack\Projects\zstack #
#                          \Samples\p2p_test(coordinator)\CC2430DB\..\..\..\T #
#                          ools\CC2430DB\f8wConfig.cfg" (-DSECURE=0           #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFF0F                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=10 -DAPSC_MAX_FRAME_RETRIES=3   #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=20           #
#                          -DNWK_MAX_BINDING_ENTRIES=10                       #
#                          -DMAX_BINDING_CLUSTER_IDS=5 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\zstack\Components\hal\ta #
#                          rget\CC2430EB\Hal_Sensor.c -D CC2430EB -D          #
#                          REFLECTOR -D ZTOOL_P1 -D MT_TASK -D MT_ZDO_FUNC    #
#                          -D xLCD_SUPPORTED=DEBUG -lC                        #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\RouterEB\List\" -lA                #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\RouterEB\List\" --diag_suppress    #
#                          Pe001,Pa010 --diag_remark pe550 -o                 #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\RouterEB\Obj\" -e                  #
#                          --require_prototypes -z9 --no_code_motion --debug  #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data --nr_virtual_regs 8  #
#                          -I "E:\zstack\Projects\zstack\Samples\p2p_test(coo #
#                          rdinator)\CC2430DB\" -I "E:\zstack\Projects\zstack #
#                          \Samples\p2p_test(coordinator)\CC2430DB\..\SOURCE\ #
#                          " -I "E:\zstack\Projects\zstack\Samples\p2p_test(c #
#                          oordinator)\CC2430DB\..\..\..\ZMAIN\TI2430DB\" -I  #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\..\..\..\..\..\COMPONENTS\MT\" -I  #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\..\..\..\..\..\COMPONENTS\HAL\INCL #
#                          UDE\" -I "E:\zstack\Projects\zstack\Samples\p2p_te #
#                          st(coordinator)\CC2430DB\..\..\..\..\..\COMPONENTS #
#                          \HAL\TARGET\CC2430EB\" -I                          #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\..\..\..\..\..\COMPONENTS\OSAL\MCU #
#                          \CCSOC\" -I "E:\zstack\Projects\zstack\Samples\p2p #
#                          _test(coordinator)\CC2430DB\..\..\..\..\..\COMPONE #
#                          NTS\OSAL\INCLUDE\" -I "E:\zstack\Projects\zstack\S #
#                          amples\p2p_test(coordinator)\CC2430DB\..\..\..\..\ #
#                          ..\COMPONENTS\STACK\AF\" -I                        #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\..\..\..\..\..\COMPONENTS\STACK\NW #
#                          K\" -I "E:\zstack\Projects\zstack\Samples\p2p_test #
#                          (coordinator)\CC2430DB\..\..\..\..\..\COMPONENTS\S #
#                          TACK\SEC\" -I "E:\zstack\Projects\zstack\Samples\p #
#                          2p_test(coordinator)\CC2430DB\..\..\..\..\..\COMPO #
#                          NENTS\STACK\SYS\" -I "E:\zstack\Projects\zstack\Sa #
#                          mples\p2p_test(coordinator)\CC2430DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\ZDO\" -I                        #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\..\..\..\..\..\COMPONENTS\ZMAC\F8W #
#                          \" -I "E:\zstack\Projects\zstack\Samples\p2p_test( #
#                          coordinator)\CC2430DB\..\..\..\..\..\COMPONENTS\ZM #
#                          AC\" -I "E:\zstack\Projects\zstack\Samples\p2p_tes #
#                          t(coordinator)\CC2430DB\..\..\..\..\..\COMPONENTS\ #
#                          SERVICES\SADDR\" -I "E:\zstack\Projects\zstack\Sam #
#                          ples\p2p_test(coordinator)\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\SERVICES\SDATA\" -I                    #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\..\..\..\..\..\COMPONENTS\MAC\INCL #
#                          UDE\" -I "E:\zstack\Projects\zstack\Samples\p2p_te #
#                          st(coordinator)\CC2430DB\..\..\..\..\..\COMPONENTS #
#                          \MAC\HIGH_LEVEL\" -I "E:\zstack\Projects\zstack\Sa #
#                          mples\p2p_test(coordinator)\CC2430DB\..\..\..\..\. #
#                          .\COMPONENTS\MAC\LOW_LEVEL\SRF03\" -I              #
#                          "E:\zstack\Projects\zstack\Samples\p2p_test(coordi #
#                          nator)\CC2430DB\..\..\..\..\..\COMPONENTS\MAC\LOW_ #
#                          LEVEL\SRF03\SINGLE_CHIP\" -I "C:\Program           #
#                          Files\IAR Systems\Embedded Workbench 4.0           #
#                          Evaluation version\8051\INC\" -I "C:\Program       #
#                          Files\IAR Systems\Embedded Workbench 4.0           #
#                          Evaluation version\8051\INC\CLIB\"                 #
#    List file          =  E:\zstack\Projects\zstack\Samples\p2p_test(coordin #
#                          ator)\CC2430DB\RouterEB\List\Hal_Sensor.lst        #
#    Object file        =  E:\zstack\Projects\zstack\Samples\p2p_test(coordin #
#                          ator)\CC2430DB\RouterEB\Obj\Hal_Sensor.r51         #
#                                                                             #
#                                                                             #
###############################################################################

E:\zstack\Components\hal\target\CC2430EB\Hal_Sensor.c
      1          
      2          #include "hal_mcu.h"

   \                                 In  segment SFR_AN, at 0x8a
   \   unsigned char volatile __sfr P1IFG
   \                     P1IFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x8c
   \   unsigned char volatile __sfr PICTL
   \                     PICTL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf7
   \   unsigned char volatile __sfr P2INP
   \                     P2INP:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1
      3          #include "hal_defs.h"
      4          #include "hal_types.h"
      5          #include "hal_drivers.h"
      6          #include "hal_adc.h"
      7          #include "hal_key.h"
      8          #include "osal.h"
      9          #include "Hal_Sensor.h"
     10          
     11          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     12          void HalSensorConfig ( void )
   \                     HalSensorConfig:
     13          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
     14              //HONGWAI SENSOR<< P1_2
     15            //P1_2 = 1;
     16            //P1INP |= 0x08;  /* config the input mode to tristate */
     17            P2INP |= 0x40;    /* config the input mode to poll_down */
   \   000000   43F740       ORL     0xf7,#0x40
     18            P1SEL &= ~( InfraredSensorBit );   /* Set pin function to GPIO */
   \   000003   53F4FB       ANL     0xf4,#0xfb
     19            P1DIR &= ~( InfraredSensorBit );   /* Set pin direction to Input */
   \   000006   53FEFB       ANL     0xfe,#0xfb
     20            PICTL &= ~( IENBIT );   /* rising edge on input give interrupt */ 
   \   000009   538CFD       ANL     0x8c,#0xfd
     21            //IEN2 |= 0x10;     /*enabled interrupt*/
     22            //P1IEN |= InfraredSensorBit;    /*enabled interrupt*/
     23            P1IFG &= ~(InfraredSensorBit);
   \   00000C   538AFB       ANL     0x8a,#0xfb
     24             //HONGWAI SENSOR>
     25            
     26            //YANWU SENSOR<<P1_3
     27              P1SEL &= ~( SmokeSensorBit );   /* Set pin function to GPIO */
   \   00000F   53F4F7       ANL     0xf4,#0xf7
     28            //P1SEL &= 0xF7;
     29            P1DIR &= ~( SmokeSensorBit );   /* Set pin direction to Input */
   \   000012   53FEF7       ANL     0xfe,#0xf7
     30            //P1DIR &= 0xF7;
     31            //IEN2 |= 0x10;     /*enabled interrupt*/
     32            //P1IEN |= SmokeSensorBit;    /*enabled interrupt*/
     33            P1IFG &= ~(SmokeSensorBit);
   \   000015   538AF7       ANL     0x8a,#0xf7
     34            //YANWU SENSOR>
     35          }
   \   000018   02....       LJMP    ?BRET
   \   00001B                REQUIRE P1IFG
   \   00001B                REQUIRE PICTL
   \   00001B                REQUIRE P1SEL
   \   00001B                REQUIRE P2INP
   \   00001B                REQUIRE P1DIR

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalSensorConfig?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalSensorConfig

   Maximum stack usage in bytes:

     Function        ISTACK PSTACK XSTACK
     --------        ------ ------ ------
     HalSensorConfig     0      0      0


   Segment part sizes:

     Function/Label          Bytes
     --------------          -----
     P1IFG                      1
     PICTL                      1
     P1SEL                      1
     P2INP                      1
     P1DIR                      1
     HalSensorConfig           27
     ??HalSensorConfig?relay    6

 
 27 bytes in segment BANKED_CODE
  6 bytes in segment BANK_RELAYS
  5 bytes in segment SFR_AN
 
 33 bytes of CODE memory
  0 bytes of DATA memory (+ 5 bytes shared)

Errors: none
Warnings: none
